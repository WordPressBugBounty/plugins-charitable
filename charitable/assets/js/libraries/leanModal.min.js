!function(e,o){var t,a,l,i,n=(i=!1,function(n,s){i||((l=e.extend({verticalOffset:100,overlay:.5,closeButton:null},s)).verticalOffset=parseInt(l.verticalOffset),(t=e("body")).append(e('<div id="lean_overlay"></div>')),a=e("#lean_overlay"),n.on("click",(function(t){var i=r.get_target(e(this));if(i){var n=e(i);r.open(n,t),n.on("click",l.closeButton,(function(e){r.close(n),e.preventDefault()})),a.on("click",(function(){r.close(n)})),e(o).on("keyup",(function(e){return 27===e.keyCode&&r.close(n)})),t.preventDefault()}})),i=!0)}),r={init:function(e){n(this,e)},open:function(o){var i=function(){r.resize(o)};a.css({display:"block",opacity:0}).fadeTo(200,l.overlay),o.css({display:"block",position:"fixed",opacity:0,"z-index":1e5}).fadeTo(200,1),i(),o.resize(i),e(window).resize(i),o.trigger("focus"),t.trigger("charitable:modal:open")},get_target:function(e){var o=e.data("trigger-modal");return o&&0!==o.length?("#"!==o.charAt(0)&&(o="#"+o),o):null},close:function(e){a.fadeOut(200),e.hide(),r.reset(e),t.trigger("charitable:modal:close",e)},reset:function(e){e.css({bottom:"auto",overflowY:"auto"})},resize:function(o){var a,i=e(window).height(),n=o.outerWidth(),r=o.outerHeight();if(available_offset=i-r,modal_is_too_tall=(a=r+2*l.verticalOffset,i<a),modal_css={left:"50%","margin-left":-n/2+"px",top:l.verticalOffset+"px"},modal_is_too_tall){if(available_offset>0){var s=available_offset/2;modal_css.top=s+"px",modal_css.bottom=s+"px"}available_offset<=0&&(modal_css.top="10px",modal_css.bottom="10px",modal_css.overflowY="scroll")}o.css(modal_css),t.trigger("charitable:modal:resize")}};e.fn.extend({leanModal:function(o){return r[o]?r[o].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof o&&o?void e.error("Method "+o+" does not exist on jQuery.leanModal"):r.init.apply(this,arguments)}}),e(o).ready((function(){e("[data-trigger-modal]").leanModal({closeButton:".modal-close"})}))}(jQuery,document);